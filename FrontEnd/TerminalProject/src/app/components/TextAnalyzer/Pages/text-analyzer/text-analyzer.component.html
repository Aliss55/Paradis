<div class="flex flex-column p-3">

  <div class="title flex justify-content-center sm:text-7xl text-5xl">
    {{ 'OPTIONS.ANALIZE_TEXT' | translate }}
  </div>

  <div class="grid sm:mt-7 mt-3">


    <div class="flex-order-1 md:flex-order-0 md:col-7 sm:px-5 px-0 col-12">
      <form [formGroup]="analyzeTextForm">
        <p-card styleClass="sm:px-5 sm:pt-5 sm:pb-2 p-1">

          <div class="flex flex-column gap-2">
            <div class="flex justify-content-between p-2 surface-0 border-round-2xl">
              <div class="text-options">

                <p-button (click)="toggleFormat('bold')" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">format_bold</i>
                </p-button>

                <p-button (click)="toggleFormat('italic')" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">format_italic</i>
                </p-button>

                <p-button (click)="toggleFormat('underline')" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">format_underlined</i>
                </p-button>

                <p-button (click)="updateFontSize(1)" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">text_increase</i>
                </p-button>

                <p-button (click)="updateFontSize(-1)" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">text_decrease</i>
                </p-button>
              </div>
              <div class="text-options">
                <p-button (click)="alignText('')" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">format_align_left</i>
                </p-button>

                <p-button (click)="alignText('center')" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">format_align_center</i>
                </p-button>

                <p-button (click)="alignText('right')" [rounded]="true" [text]="true" size="small">
                  <i class="material-icons">format_align_right</i>
                </p-button>
              </div>
            </div>


            <p-editor
              #editor
              (keydown)="rejectSuggestion($event)"
              (keyup.space)="suggestNextWord()"
              (keyup.tab)="acceptSuggestion()"
              spellcheck="false"
              formControlName="text"
              styleClass="h-12rem">
            </p-editor>

          </div>

          <ng-template pTemplate="footer">
            <div class="flex justify-content-end gap-3 flex-wrap">


              <div class="hidden sm:flex gap-2">
                <p-inputSwitch formControlName="suggesterChecked">
                </p-inputSwitch>
                <b class="text-sm p-2 sugerencia-palabra">{{'ANALYZE_TEXT.SUGGEST_WORDS' | translate}}</b>
              </div>


              <p-button (click)="analyzeText()" class="ml-3" severity="secondary">
                <b>{{'ANALYZE_TEXT.ANALYZE' | translate}}</b>
                <i class="material-icons ml-3">send</i>

              </p-button>
            </div>
          </ng-template>

        </p-card>
      </form>
    </div>

    <div class="flex-order-0 md:flex-order-1 md:col-5 col-12 ">
      <p-card styleClass="sm:px-5 px-1 pb-1">
        <p-toast key="error" [baseZIndex]="10000" position="bottom-center"></p-toast>
        <p-toast key="success" [baseZIndex]="10000" position="bottom-center"></p-toast>
        <div *ngIf="!isAnalyzeButtonClicked; else anaylyzedText">
          <h1 class="title md:text-6xl">{{'INSTRUCTIONS'| translate }}</h1>
          <p class="md:text-2xl text-2xl sugerencia-palabra" [innerHTML]="'ANALYZE_TEXT.INSTRUCTIONS' | translate" >
          </p>
        </div>

        <ng-template #anaylyzedText>
          <h1 class="title md:text-4xl">Resultados de análisis</h1>
          <div class="flex flex-column">
            <div class="flex flex-column">
              <h2>Análisis ortográfico</h2>
              <div *ngIf="!hasSpellCheckerResponse; else SpellCheckerResponse">
                <p-skeleton height="1rem" styleClass="mb-2" width="10rem"></p-skeleton>
                <p-skeleton height="1rem" styleClass="mb-2" width="15rem"></p-skeleton>
                <p-skeleton height="1rem" styleClass="mb-2" width="14rem"></p-skeleton>
                <p-skeleton height="1rem" styleClass="mb-2" width="16rem"></p-skeleton>
              </div>
              <ng-template #SpellCheckerResponse>

                <div *ngIf="spellChecker.length > 0; else noSpellCheckerResponse">
                  <div *ngFor="let sentence of spellChecker">
                    <div class="mb-3">
                      <p><strong>Oración original:</strong> {{ sentence.original_sentence }}</p>
                      <ul *ngFor="let correction of sentence.possible_corrections" class="list-none line-height-4">
                        <li><strong>Palabra:</strong> {{correction.token}} </li>
                        <li>
                          <strong>Posibles correcciones:</strong>
                          <span *ngFor="let correction of correction.corrections; let last = last">
                          {{correction.word}}<span *ngIf="!last">, </span>
                         </span>
                        </li>
                      </ul>
                      <p-divider></p-divider>
                    </div>
                  </div>

                </div>
                <ng-template #noSpellCheckerResponse>
                  <p>{{ 'NO_ORTHOGRAPHIC_ERRORS' | translate}}</p>
                </ng-template>

              </ng-template>
            </div>
            <div class="flex flex-column">
              <h2>Análisis gramatical</h2>
              <div *ngIf="!hasGrammaticalAnalyzerResponse; else GrammaticalAnalyzerResponse">
                <p-skeleton height="1rem" styleClass="mb-2" width="10rem"></p-skeleton>
                <p-skeleton height="1rem" styleClass="mb-2" width="15rem"></p-skeleton>
                <p-skeleton height="1rem" styleClass="mb-2" width="14rem"></p-skeleton>
                <p-skeleton height="1rem" styleClass="mb-2" width="16rem"></p-skeleton>
              </div>

              <ng-template #GrammaticalAnalyzerResponse>
                <div *ngIf="grammaticalAnalyzer.length > 0; else noGrammaticalAnalyzerResponse">
                  <div *ngFor="let sentence of grammaticalAnalyzer">
                    <div class="mb-3">
                      <p><strong>Oración original: </strong> {{ sentence.original_single_sentence}}</p>
                      <p><strong>Explicación: </strong> {{sentence.explanation}}</p>
                      <p-divider></p-divider>
                    </div>


                  </div>
                </div>
                <ng-template #noGrammaticalAnalyzerResponse>
                  <p>{{ 'NO_GRAMMAR_ERRORS' | translate}}</p>
                </ng-template>
              </ng-template>
            </div>
          </div>
        </ng-template>

      </p-card>
    </div>


  </div>

</div>

<p-dialog
  [(visible)]="visible"
  [maximizable]="true"
  [modal]="true"
  [style]="{ width: '50rem' }"
  header="{{'TERMS_AND_CONDITIONS.TITLE' | translate}}"
  styleClass="surface-0"
>

  <p>
   {{ 'TERMS_AND_CONDITIONS.WELCOME' | translate }}
  </p>

  <h3>  {{ 'TERMS_AND_CONDITIONS.POLITICS' | translate }} </h3>
  <ul class="list-decimal">
    <li class="line-height-4">
      <b> {{ 'TERMS_AND_CONDITIONS.TITLE' | translate }} </b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.POLITICS_1' | translate }}
      </p>
    </li>
    <li class="line-height-4">
      <b>{{ 'TERMS_AND_CONDITIONS.POLITIC_2_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.POLITIC_2' | translate }}
      </p>
    </li>
    <li class="line-height-4">
      <b>{{ 'TERMS_AND_CONDITIONS.POLITIC_3_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.POLITIC_3' | translate }}
      </p>
    </li>
  </ul>

  <h3>{{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING' | translate }}</h3>
  <ul class="list-decimal">
    <li class="line-height-4">
      <b>{{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_1_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_1' | translate }}
      </p>
    </li>
    <li class="line-height-4">
      <b> {{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_2_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_2' | translate }}
      </p>
    </li>
    <li class="line-height-4">
      <b>{{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_3_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_3' | translate }}
      </p>
    </li>
    <li class="line-height-4">
      <b>{{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_4_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_4' | translate }}
      </p>
    </li>
    <li class="line-height-4">
      <b>{{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_5_TITLE' | translate }}</b>
      <p>
        {{ 'TERMS_AND_CONDITIONS.TEXT_PROCESSING_5' | translate }}
      </p>
    </li>
  </ul>

  <p [innerHTML]="'TERMS_AND_CONDITIONS.CONSIDERATIONS' | translate ">
  </p>

  <b class="font-italic">
    {{ 'TERMS_AND_CONDITIONS.THANKS_USER' | translate }}
  </b>
  <ng-template pTemplate="footer">
    <p-button
      (click)="visible = false"
      [text]="true"
      label="{{'ACCEPT' | translate}}"
      severity="help">
      <i class="material-icons">done</i>
    </p-button>
  </ng-template>

</p-dialog>

